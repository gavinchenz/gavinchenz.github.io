(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{377:function(t,s,n){"use strict";n.r(s);var a=n(10),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"js关闭浏览器窗口的实现方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js关闭浏览器窗口的实现方式"}},[t._v("#")]),t._v(" js关闭浏览器窗口的实现方式")]),t._v(" "),s("blockquote",[s("p",[t._v("功能描述:\n在网页上创建一个按钮，用户点击后弹窗提示是否关闭浏览器（窗口），如果用户点击“是”，关闭该页面，如果“否”，则什么也不做。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("closeWindow")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" userAgent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userAgent\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userAgent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Firefox'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" userAgent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Chrome'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'about:blank'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("opener "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_self'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"代码说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码说明"}},[t._v("#")]),t._v(" 代码说明")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("location.replace()")]),t._v(" 方法可用一个新文档取代当前文档。我们这里使用一个空 “about:blank”。")]),t._v(" "),s("li",[s("strong",[t._v("opener")]),t._v(" 属性是一个可读可写的属性，可返回对创建该窗口的 Window 对象的引用，这里我们赋值为空null；使用window.open() 打开一个窗口，赋值空字符串代表空白窗口。")]),t._v(" "),s("li",[s("strong",[t._v("window.close()")]),t._v(" 方法用于关闭浏览器窗口,所有主要浏览器基本都支持 "),s("strong",[t._v("close()")]),t._v(" 方法。")]),t._v(" "),s("li",[t._v("如果是 "),s("strong",[t._v("Firefox")]),t._v(" 和 "),s("strong",[t._v("Chrome")]),t._v(" 执行 "),s("strong",[t._v("location.replace()")]),t._v(" 方法，其他浏览器执行"),s("code",[t._v("window.opener = null; window.open('', '_self');")])])]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("在某些实际应用中，"),s("strong",[t._v("window.close()")]),t._v(" 和 "),s("strong",[t._v("self.close()")]),t._v(" 是不能关闭非弹出窗口的。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("非弹出窗口，即是指（opener=null 及 非window.open()打开的窗口,比如URL直接输入的浏览器窗体， 或由其它程序调用产生的浏览器窗口）。")])]),t._v(" "),s("p",[t._v("而且由于部分浏览器的限制，部分版本的保护加强，会导致上述代码被拦截。比如：对于火狐来说，默认js不能关闭用户打开的网页，但可以通过提醒用户改 firefox 的配置文件来实现:")]),t._v(" "),s("p",[t._v("步骤：")]),t._v(" "),s("ol",[s("li",[t._v("在地址栏输入 "),s("code",[t._v("about:config")]),t._v(" 然后回车，警告确认")]),t._v(" "),s("li",[t._v("在过滤器中输入 "),s("code",[t._v("dom.allow_scripts_to_close_windows")]),t._v("，双击即可将此值设为 "),s("strong",[t._v("true")]),t._v("\n这种方法虽然可以很快解决问题，但是 "),s("strong",[t._v("实际应用中不可能去要求每个用户去改自己浏览器的配置")]),t._v("。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);